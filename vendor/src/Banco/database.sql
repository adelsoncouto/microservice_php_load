/* database deve ser criada previamente
CREATE DATABASE IF NOT EXISTS service_load CHARACTER SET utf8 COLLATE utf8_general_ci;
*/

/* cria as tabelas se elas não existirem */
CREATE TABLE IF NOT EXISTS aplicacao(
  id bigint NOT NULL AUTO_INCREMENT,
  nome varchar(255) NOT NULL COMMENT 'CONTÉM O NOME DA APLICAÇÃO DEVE SER ÚNICO',
  PRIMARY KEY (id),
  UNIQUE indices_unico (nome)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;


CREATE TABLE IF NOT EXISTS javascript(
  id bigint NOT NULL AUTO_INCREMENT,
  nome varchar(255) NOT NULL COMMENT 'CONTÉM O NOME DO COMPONENTE/API/FRAMEWORK ETC, NÃO PRECISA SER ÚNICO, MAS NÃO DEVE REPETIR NOME E VERSÃO IGUAIS',
  versao varchar(20) NOT NULL COMMENT 'CONTÉM A VERSÃO',
  protocolo varchar(255) NOT NULL COMMENT 'TIPO DE PROTOCOLO FILE/TCP',
  url varchar(255) NOT NULL COMMENT 'CONTÉM O URL PARA ACESSAR, SE FILE O PATH SE TCP A URL',
  PRIMARY KEY (id)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;


CREATE TABLE IF NOT EXISTS css(
  id bigint NOT NULL AUTO_INCREMENT,
  nome varchar(255) NOT NULL COMMENT 'CONTÉM O NOME DO COMPONENTE/API/FRAMEWORK ETC, NÃO PRECISA SER ÚNICO, MAS NÃO DEVE REPETIR NOME E VERSÃO IGUAIS',
  versao varchar(20) NOT NULL COMMENT 'CONTÉM A VERSÃO',
  protocolo varchar(255) NOT NULL COMMENT 'TIPO DE PROTOCOLO FILE/TCP',
  url varchar(255) NOT NULL COMMENT 'CONTÉM O URL PARA ACESSAR, SE FILE O PATH SE TCP A URL',
  PRIMARY KEY (id)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;


CREATE TABLE IF NOT EXISTS html(
  id bigint NOT NULL AUTO_INCREMENT,
  nome varchar(255) NOT NULL COMMENT 'CONTÉM O NOME DO COMPONENTE/API/FRAMEWORK ETC, NÃO PRECISA SER ÚNICO, MAS NÃO DEVE REPETIR NOME E VERSÃO IGUAIS',
  versao varchar(20) NOT NULL COMMENT 'CONTÉM A VERSÃO',
  protocolo varchar(255) NOT NULL COMMENT 'TIPO DE PROTOCOLO FILE/TCP',
  url varchar(255) NOT NULL COMMENT 'CONTÉM O URL PARA ACESSAR, SE FILE O PATH SE TCP A URL',
  PRIMARY KEY (id)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;


CREATE TABLE IF NOT EXISTS aplicacao_has_javascript(
  id bigint NOT NULL AUTO_INCREMENT,
  aplicacao_id bigint NOT NULL,
  javascript_id bigint NOT NULL,
  PRIMARY KEY (id),
  KEY indices (aplicacao_id, javascript_id)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS aplicacao_has_css(
  id bigint NOT NULL AUTO_INCREMENT,
  aplicacao_id bigint NOT NULL,
  css_id bigint NOT NULL,
  PRIMARY KEY (id),
  KEY indices (aplicacao_id, css_id)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS aplicacao_has_html(
  id bigint NOT NULL AUTO_INCREMENT,
  aplicacao_id bigint NOT NULL,
  html_id bigint NOT NULL,
  PRIMARY KEY (id),
  KEY indices (aplicacao_id, html_id)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
